<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.

-->
<htmlform>

    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <script type="text/javascript">
        $.fn.noText = function() {/*use the jquery prototype technology to make a chainable clear field method*/
            if(this.is('clinicVisit_form')){ /*check to c if you the element type is an input*/
                this.val('');/*clear the input field*/
            }return this;/*means it is chainable*/
        };
        $('input').noText();
        var StiScreened  = function () {
            var sti_screened = getValue("sti_screened.value");
            if(sti_screened ==1066) {
                jq("#sti_treated input").prop("disabled", true);
                jq("#sti_results input").prop("disabled", true);
                jq("#sti_referred input").prop("disabled", true);
                jq("#sti_txt input").prop("disabled", true);
                jq("#sti_treated input").prop('checked', false);
                jq("#sti_results input").prop('checked', false);
                jq("#sti_referred input").prop('checked', false);
                jq("#sti_results input").attr("required","false");
                jq("#sti_txt input").val('');
            }
            else{
                jq("#sti_results input").prop("disabled", false);

            }
        }
        var StiResults  = function () {
            var stiResults = getValue("sti_results.value");
            if(stiResults==703){
                jq("#sti_treated input").prop("disabled", false);
                jq("#sti_referred input").prop("disabled", false);
            }
            else {
                jq("#sti_treated input").prop("disabled", true);
                jq("#sti_referred input").prop("disabled", true);
                jq("#sti_txt input").prop("disabled", true);
                jq("#sti_treated input").prop('checked', false);
                jq("#sti_referred input").prop('checked', false);
                jq("#sti_txt input").val('');
            }
        }

        var StiReferred  = function () {
            var stiReferred = getValue("sti_referred.value");
            if(stiReferred==1065){
                jq("#sti_txt input").prop("disabled", false);
            }else{
                jq("#sti_txt input").prop("disabled", true);
            }
        }
        var tbScreened  = function () {
            var HepbScreened = getValue("tb_screened.value");
            if(HepbScreened ==1065) {
                jq("#tb_results input").prop("disabled", false);
            }
            else{

                jq("#tb_treated input").prop("disabled", true);
                jq("#tb_results input").prop("disabled", true);
                jq("#tb_referred input").prop("disabled", true);
                jq("#tb_txt input").prop("disabled", true);

                jq("#tb_treated input").prop('checked', false);
                jq("#tb_results input").prop('checked', false);
                jq("#tb_referred input").prop('checked', false);
                jq("#tb_txt input").val('');

            }

        }
        var tbResults  = function () {
            var HepbResults = getValue("tb_results.value");

            if(HepbResults==703){
                jq("#tb_treated input").prop("disabled", false);
                jq("#tb_referred input").prop("disabled", false);
            }
            else{
                jq("#tb_treated input").prop("disabled", true);
                jq("#tb_referred input").prop("disabled", true);
                jq("#tb_txt input").prop("disabled", true);
            }
        }

        var tbReferred  = function () {
            var HepbReferred = getValue("tb_referred.value");


            if(HepbReferred==1065){
                jq("#tb_txt input").prop("disabled", false);
            }else{
                jq("#tb_txt input").prop("disabled", true);
            }

        }
        ///========
        var HepatitisbScreened  = function () {
            var HepbScreened = getValue("hepb_screened.value");
            if(HepbScreened ==1066) {
                jq("#hepb_treated input").prop("disabled", true);
                jq("#hepb_results input").prop("disabled", true);
                jq("#hepb_referred input").prop("disabled", true);
                jq("#hepb_txt input").prop("disabled", true);

                jq("#hepb_treated input").prop('checked', false);
                jq("#hepb_results input").prop('checked', false);
                jq("#hepb_referred input").prop('checked', false);
                jq("#hepb_txt input").val('');

            }
            else{
                jq("#hepb_results input").prop("disabled", false);
            }

        }
        var HepatitisbResults  = function () {
            var HepbResults = getValue("hepb_results.value");

            if(HepbResults==703){
                jq("#hepb_treated input").prop("disabled", false);
                jq("#hepb_referred input").prop("disabled", false);
            }
            else{

                jq("#hepb_treated input").prop("disabled", true);
                jq("#hepb_referred input").prop("disabled", true);
                jq("#hepb_txt input").prop("disabled", true);

            }

        }

        var HepatitisbReferred  = function () {
            var HepbReferred = getValue("hepb_referred.value");
            if(HepbReferred==1065){
                jq("#hepb_txt input").prop("disabled", false);
            }else{
                jq("#hepb_txt input").prop("disabled", true);
            }
        }

        var HepatitiscScreened  = function () {
            var HepcScreened = getValue("hepc_screened.value");
            if(HepcScreened ==1066) {

                jq("#hepc_results input").prop("disabled", true);
                jq("#hepc_treated input").prop("disabled", true);
                jq("#hepc_referred input").prop("disabled", true);
                jq("#hepctxt input").prop("disabled", true);

                jq("#hepc_treated input").prop('checked', false);
                jq("#hepc_results input").prop('checked', false);
                jq("#hepc_referred input").prop('checked', false);
                jq("#hepctxt input").val('');
            }
            else{
                jq("#hepc_results input").prop("disabled", false);

            }

        }
        var HepatitiscResults  = function () {
            var HepbResults = getValue("hepc_results.value");

            if(HepbResults==703){
                jq("#hepc_treated input").prop("disabled", false);
                jq("#hepc_referred input").prop("disabled", false);
            }
            else {
                jq("#hepc_treated input").prop("disabled", true);
                jq("#hepc_referred input").prop("disabled", true);
                jq("#hepctxt input").prop("disabled", true);
            }
        }

        var HepatiriscReferred  = function () {
            var HepbReferred = getValue("hepc_referred.value");
            if(HepbReferred==1065){
                jq("#hepctxt input").prop("disabled", false);
            }else{
                jq("#hepctxt input").prop("disabled", true);
            }

        }

        var OverdoseScreenedSelected = function (){
            var overdoseScreened= getValue("overdose_screened.value");

            if(overdoseScreened==1066){
                jq("#overdose_treated input").prop("disabled", true);
                jq("#overdose_referred input").prop("disabled", true);
                jq("#overdosetxt input").prop("disabled", true);
                jq("#overdose_results input").prop("disabled", true);
                jq("#naloxane input").prop("disabled", true);

            }else{
                jq("#overdose_results input").prop("disabled", false);
            }

        }
        var OverdoseTtreateddSelected = function (){
            var overdoseTreated= getValue("overdose_treated.value");

            if(overdoseTreated==1066){
                jq("#naloxane input").prop("disabled", true);
            }else{
                jq("#naloxane input").prop("disabled", false);
            }

        }


        var OverdoseResultsSelected = function (){
            var overdoseResults= getValue("overdose_results.value");
            if(overdoseResults==703 ){
                jq("#overdose_treated input").prop("disabled", false);
                jq("#overdose_referred input").prop("disabled", false);
            }
            else{
                jq("#overdose_treated input").prop("disabled", true);
                jq("#overdose_referred input").prop("disabled", true);
                jq("#overdosetxt input").prop("disabled", true);

            }
        }

        var OverdoseRefferredSelected = function (){
            var overdoseReferred= getValue("overdose_referred.value");
            if(overdoseReferred==1065){
                jq("#overdosetxt input").prop("disabled", false);
            }else{
                jq("#overdosetxt input").prop("disabled", true);
            }

        }

        var AlcoholScreenedSelected = function (){
            var alcoholScreened= getValue("alcohol_screened.value");

            if(alcoholScreened==1065){

                jq("#alcohol_results input").prop("disabled", false);
            }else{
                jq("#alcohol_treated input").prop("disabled", true);
                jq("#alcohol_referred input").prop("disabled", true);
                jq("#alcohol_results input").prop("disabled", true);
            }

        }
        var AlcoholResultsSelected = function (){
            var alcoholResults= getValue("alcohol_results.value");
            if(alcoholResults==703){
                jq("#alcohol_treated input").prop("disabled", false);
                jq("#alcohol_referred input").prop("disabled", false);
            }
            else{
                jq("#alcohol_treated input").prop("disabled", true);
                jq("#alcohol_referred input").prop("disabled", true);
                jq("#alcoholtxt input").prop("disabled", true);
            }
        }

        var AlcoholReferredSelected = function (){
            var alcoholReferred= getValue("alcohol_referred.value");

            if(alcoholReferred==1065){
                jq("#alcoholtxt input").prop("disabled", false);
            }else{
                jq("#alcoholtxt input").prop("disabled", true);
            }

        }

        var AbscessScreenedSelected = function (){
            var abscessScreened= getValue("abscess_screened.value");

            if(abscessScreened==1066){
                jq("#abscess_treated input").prop("disabled", true);
                jq("#abscess_referred input").prop("disabled", true);
                jq("#abscess_results input").prop("disabled", true);
            }else{
                jq("#abscess_results input").prop("disabled", false);
            }

        }
        var AbscessResultsSelected = function (){
            var abscessResults= getValue("abscess_results.value");

            if(abscessResults==703  ){
                jq("#abscess_treated input").prop("disabled", false);
                jq("#abscess_referred input").prop("disabled", false);
                jq("#abscesstxt input").prop("disabled", true);
            }
            else{
                jq("#abscess_treated input").prop("disabled", true);
                jq("#abscess_referred input").prop("disabled", true);
                jq("#abscesstxt input").prop("disabled", true);
            }
        }

        var AbscessReferredSelected = function (){
            var abscessReferred= getValue("abscess_referred.value");

            if(abscessReferred==1065){
                jq("#abscesstxt input").prop("disabled", false);
            }else{
                jq("#abscesstxt input").prop("disabled", true);
            }
        }

        var CervicalScreeningSelected = function (){
            var cervicalScreened= getValue("cerv_screened.value");
            if(cervicalScreened==1065){
                jq("#cerv_results input").prop("disabled", false);
            }
            else{
                jq("#cerv_referred input").prop("disabled", true);
                jq("#cerv_cancertxt input").prop("disabled", true);
                jq("#cerv_treated input").prop("disabled", true);
                jq("#cerv_results input").prop("disabled", true);
            }


        }
        var CervicalResulltsSelected = function (){
            var cervicaResults= getValue("cerv_results.value");
            if(cervicaResults==703){
                jq("#cerv_referred input").prop("disabled", false);
                jq("#cerv_treated input").prop("disabled", false);
            }
            else{
                jq("#cerv_referred input").prop("disabled", true);
                jq("#cerv_cancertxt input").prop("disabled", true);
                jq("#cerv_treated input").prop("disabled", true);
            }

        }

        var CervicalReferredSelected = function (){
            var cervicalReferred= getValue("cerv_referred.value");

            //cervical validations
            if(cervicalReferred==1065){
                jq("#cerv_cancertxt input").prop("disabled", false);
            }else{
                jq("#cerv_cancertxt input").prop("disabled", true);
            }

        }

        var prepScreened  = function () {
            var PrepScreened = getValue("prep_screened.value");
            var PrepReferred = getValue("prep_referred.value");
            if(PrepScreened ==1065) {
                jq("#prep_results input").prop("disabled", false);

            }
            else{

                jq("#prep_results input").prop("disabled", true);
                jq("#prep_treated input").prop("disabled", true);
                jq("#prep_referred input").prop("disabled", true);
            }

        }
        var prepResults  = function () {
            var PrepResults = getValue("prep_results.value");

            if(PrepResults==165078){
                jq("#prep_treated input").prop("disabled", true);
                jq("#prep_referred input").prop("disabled", true);
                jq("#preptext input").prop("disabled", true);
            }
            else{
                jq("#prep_treated input").prop("disabled", false);
                jq("#prep_referred input").prop("disabled", false);

            }

        }

        var prepReferred  = function () {
            var PrepReferred = getValue("prep_referred.value");
            if(PrepReferred==1065){
                jq("#preptext input").prop("disabled", false);
            }else{
                jq("#preptext input").prop("disabled", true);
            }

        }

        var vilenceScreened  = function () {
            var VioScreened = getValue("vio_screened.value");
            var VioReferred = getValue("vio_referred.value");
            if(VioScreened ==1066) {

                jq("#vio_results input").prop("disabled", true);
                jq("#vio_treated input").prop("disabled", true);
                jq("#vio_referred input").prop("disabled", true);
                jq("#viotext input").prop("disabled", true);
                jq("#vio_exists input").prop("disabled", true);
            }
            else{

                jq("#vio_exists input").prop("disabled", false);


            }

        }
        var vilenceExists  = function () {
            var VioScreened = getValue("vio_exists.value");
            if(VioScreened ==1066) {

                jq("#vio_results input").prop("disabled", true);
                jq("#vio_treated input").prop("disabled", true);
                jq("#vio_referred input").prop("disabled", true);
                jq("#viotext input").prop("disabled", true);
            }
            else{

                jq("#vio_results input").prop("disabled", false);
                jq("#vio_treated input").prop("disabled", false);
                jq("#vio_referred input").prop("disabled", false);

            }

        }


        var violenceResults  = function () {
            var VioResults = getValue("vio_results.value");

            if(VioResults==664){
                jq("#vio_treated input").prop("disabled", true);
                jq("#vio_referred input").prop("disabled", true);
                jq("#viotext input").prop("disabled", true);
            }
            else{
                jq("#vio_treated input").prop("disabled", false);
                jq("#vio_referred input").prop("disabled", false);

            }

        }

        var violenceReferred  = function () {
            var vioReferred = getValue("vio_referred.value");
            if(vioReferred==1065){
                jq("#viotext input").prop("disabled", false);
            }else{
                jq("#viotext input").prop("disabled", true);
            }

        }

        var riskScreened  = function () {
            var riskScreened = getValue("risk_screened.value");
            var riskReferred = getValue("risk_referred.value");
            if(riskScreened ==1065) {

                jq("#risk_results input").prop("disabled", false);

            }
            else{

                jq("#risk_results input").prop("disabled", true);
                jq("#risk_treated input").prop("disabled", true);
                jq("#risk_referred input").prop("disabled", true);

            }

        }
        var riskResults  = function () {
            var riskResults = getValue("risk_results.value");

            if(riskResults==165078){
                jq("#risk_treated input").prop("disabled", true);
                jq("#risk_referred input").prop("disabled", true);
                jq("#risktxt input").prop("disabled", true);
            }
            else{
                jq("#risk_treated input").prop("disabled", false);
                jq("#risk_referred input").prop("disabled", false);

            }

        }

        var riskReferred  = function () {
            var HepbReferred = getValue("risk_referred.value");
            if(HepbReferred==1065){
                jq("#risktxt input").prop("disabled", false);
            }else{
                jq("#risktxt input").prop("disabled", true);
            }

        }

        var familyScreened  = function () {
            var famScreened = getValue("fam_screened.value");
            if(famScreened ==1065) {
                jq("#fam_results input").prop("disabled", false);
            }
            else{

                jq("#fam_results input").prop("disabled", true);
                jq("#fam_treated input").prop("disabled", true);
                jq("#fam_referred input").prop("disabled", true);

            }

        }
        var familyResults  = function () {
            var famResults = getValue("fam_results.value");

            if(famResults==165087){
                jq("#fam_treated input").prop("disabled", false);
                jq("#fam_referred input").prop("disabled", false);
                jq("#famtxt input").prop("disabled", true);
            }
            else{
                jq("#fam_treated input").prop("disabled", true);
                jq("#fam_referred input").prop("disabled", true);
                jq("#famtxt input").prop("disabled", true);
                jq("#famMethod select").attr('disabled', 'disabled');

            }

        }

        var familyReferred  = function () {
            var famReferred = getValue("fam_referred.value");
            if(famReferred==1065){
                jq("#famtxt input").prop("disabled", false);
            }else{
                jq("#famtxt input").prop("disabled", true);
            }

        }
        var familyTreated  = function () {
            var famReferred = getValue("fam_treated.value");
            if(famReferred==1065){
                jq("#famMethod select").attr('disabled', false);
            }else{
                jq("#famMethod select").attr('disabled', 'disabled');
                jq("#famMethod select").val("Select");
            }

        }

        var menScreened  = function () {
            var menScreened = getValue("men_screened.value");
            if(menScreened ==1066) {
                //jq("#hepc_screened input").prop("disabled", true);
                jq("#men_results input").prop("disabled", true);
                jq("#men_treated input").prop("disabled", true);
                jq("#men_referred input").prop("disabled", true);
                jq("#mentxt input").prop("disabled", true);
            }
            else{
                jq("#men_screened input").prop("disabled", false);
                jq("#men_results input").prop("disabled", false);
                jq("#men_treated input").prop("disabled", false);
                jq("#men_referred input").prop("disabled", false);

            }


        }
        var menResults  = function () {
            var menResults = getValue("men_results.value");

            if(menResults==664){
                jq("#men_treated input").prop("disabled", true);
                jq("#men_referred input").prop("disabled", true);
                jq("#mentxt input").prop("disabled", true);
            }
            else{
                jq("#men_treated input").prop("disabled", false);
                jq("#men_referred input").prop("disabled", false);
            }

        }

        var menReferred  = function () {
            var menReferred = getValue("men_referred.value");
            if(menReferred==1065){
                jq("#mentxt input").prop("disabled", false);
            }else{
                jq("#mentxt input").prop("disabled", true);
            }

        }

        var hivTesting  = function () {
            var selfReportedStatus = getValue("hiv_selfreported.value");
            var testSetting = jq('#hiv_settingoflasttest');
            var hivCounselled = jq('#hiv_counselled');
            var testFrequency = jq('#test_frequency');
            var receivedResults = jq('#received_results');
            var testResults = jq('#test_results');
            var hivTested = jq('#hiv_tested');
            var linkedART = jq('#linked_to_art');
            var careFacility = jq('#care_provided');

            if(selfReportedStatus==703){
                jq("#hiv_settingoflasttest input[value=1402]").prop("disabled", true);
                jq("#hiv_settingoflasttest input[value=1402]").prop("checked", false);

                jq("#care_provided input[value=1175]").prop("disabled", true);
                jq("#care_provided input[value=1175]").prop("checked", false);

                jq('#test_frequency input').prop('disabled', true).addClass('disabled');
                jq('#received_results input').prop('disabled', true).addClass('disabled');
                jq('#test_results input').prop('disabled', true).addClass('disabled');
                jq('#hiv_tested input').prop('disabled', true).addClass('disabled');

                jq("#linked_to_art input").prop("disabled", false).removeClass('disabled');
                $('#care_and_treatment').find('*').prop('disabled',false).removeClass('disabled');
                $('#care_and_treatment').find('input:text').val('');
                $('#care_and_treatment').find("select").prop("selectedIndex",0).removeClass('disabled');

                clearHiddenSections([testSetting,hivCounselled,testFrequency,receivedResults,testResults,hivTested]);
            }
            if(selfReportedStatus==1067){
                jq('#hiv_settingoflasttest input').prop('disabled', false).removeClass('disabled');
                jq('#hiv_settingoflasttest input').prop('disabled', false).removeClass('disabled');

                jq('#test_frequency input').prop('disabled', false).removeClass('disabled');
                jq('#received_results input').prop('disabled', false).removeClass('disabled');
                jq('#test_results input').prop('disabled', false).removeClass('disabled');
                jq('#hiv_tested input').prop('disabled', false).removeClass('disabled')
                jq("#linked_to_art input").prop("disabled", true).addClass('disabled');
                $('#care_and_treatment').find('*').prop('disabled',true);
                $('#care_and_treatment').find('input:text').val('');
                $('#care_and_treatment').find("select").prop("selectedIndex",0).addClass('disabled');

                jq("#txtart input").val('');
                clearHiddenSections([careFacility,testSetting,hivCounselled,linkedART]);
            }
            if(selfReportedStatus==664) {
                jq("#hiv_settingoflasttest input[value=1402]").prop("disabled", true);
                jq("#hiv_settingoflasttest input[value=1402]").prop("checked", false);
                jq('#test_frequency input').prop('disabled', false).removeClass('disabled');
                jq('#received_results input').prop('disabled', false).removeClass('disabled');
                jq('#test_results input').prop('disabled', false).removeClass('disabled');
                jq('#hiv_tested input').prop('disabled', false).removeClass('disabled')
                jq("#linked_to_art input").prop("disabled", true).addClass('disabled');
                $('#care_and_treatment').find('*').prop('disabled',true);
                $('#care_and_treatment').find('input:text').val('');
                $('#care_and_treatment').find("select").prop("selectedIndex",0).addClass('disabled');

                jq("#txtart input").val('');
                clearHiddenSections([careFacility,testSetting,hivCounselled,linkedART]);
            }
        }

        var hivTested  = function () {
            var tested = getValue("hiv_tested.value");
            if(tested==1066){
                jq('#test_frequency input').prop('disabled', true).addClass('disabled');
                jq('#received_results input').prop('disabled', true).addClass('disabled');
                jq('#test_results input').prop('disabled', true).addClass('disabled');
                jq('#linked_to_art input').prop('disabled', true).addClass('disabled');

            }else{
                jq('#test_frequency input').prop('disabled', false).removeClass('disabled');
                jq('#received_results input').prop('disabled', false).removeClass('disabled');
                jq('#test_results input').prop('disabled', false).removeClass('disabled');
                jq('#linked_to_art input').prop('disabled', false).removeClass('disabled');
            }

        }
        var numberOfSelfTest  = function () {
            var tested = getValue("hiv_selftest.value");
            if(tested==165222){
                jq("#disttxt input").val('');
                jq("#selftxt input").prop("disabled", false);
                jq("#disttxt input").prop("disabled", true);


            }
            else if(tested == 165223)
            {
                jq("#selftxt input").val('');
                jq("#disttxt input").prop("disabled", false)
                jq("#selftxt input").prop("disabled", true)

            }
            else{
                jq("#selftxt input").val('');
                jq("#disttxt input").val('');
                jq("#disttxt input").prop("disabled", true)
                jq("#selftxt input").prop("disabled", true);

            }

        }

        var SelfTested  = function () {
            var tested = getValue("self_tested.value");
            if(tested==1065){

                jq('#selftestFrequency input').prop('disabled', false).removeClass('disabled');
                jq('#selftestResults input').prop('disabled', false).removeClass('disabled');
                jq("#selftestDate input").prop("disabled", false);
            }

            else{
                jq("#selftestDate input").val('');
                jq("#selftestDate input").prop("disabled", true);
                jq('#selftestFrequency input').prop('disabled', true).addClass('disabled');
                jq('#selftestResults input').prop('disabled', true).addClass('disabled');
            }

        }

        var selfTestedResults  = function () {
            var tested = getValue("selftestResults.value");
            var testConfirmation = jq('#confirm_test');
            var confirmationFacility = jq('#facility');
            var linkedART = jq('#linktoart');
            var careFacility = jq('#care_provided');
            if(tested==664){
                jq("#care_provided input[value=1175]").prop("disabled", false);
                jq("#care_provided input[value=1175]").prop("checked", true);

                jq('#confirm_test input').prop('disabled', true).addClass('disabled');
                jq('#facility input').prop('disabled', true).addClass('disabled');
                jq('#linktoart input').prop('disabled', true).addClass('disabled');
                clearHiddenSections([careFacility,testConfirmation,confirmationFacility,linkedART]);
            } else{

                jq("#care_provided input[value=1175]").prop("disabled", true);
                jq("#care_provided input[value=1175]").prop("checked", false);

                jq('#confirm_test input').prop('disabled', false).removeClass('disabled');
                jq('#facility input').prop('disabled', false).removeClass('disabled');
                jq('#linktoart input').prop('disabled', false).removeClass('disabled');
                clearHiddenSections([careFacility,testConfirmation,confirmationFacility,linkedART]);
            }

        }
        var confirmTest  = function () {
            var tested = getValue("confirm_test.value");
            var careFacility = jq('#care_provided');
            if(tested==664){

                jq("#care_provided input[value=1175]").prop("disabled", false);
                jq("#care_provided input[value=1175]").prop("checked", true);
                jq('#facility input').prop('disabled', false).removeClass('disabled');
                jq('#linktoart input').prop('disabled', true).addClass('disabled');
                jq("#linktxt input").prop("disabled", true);

                clearHiddenSections([careFacility]);

            }
            else if(tested == 703){
                jq('#linktoart input').prop('disabled', false).removeClass('disabled');
                jq('#facility input').prop('disabled', false).removeClass('disabled');
                jq("#care_provided input[value=1175]").prop("disabled", true);
                jq("#care_provided input[value=1175]").prop("checked", false);

                clearHiddenSections([careFacility]);

            }
            else{

                jq('#facility input').prop('disabled', true).addClass('disabled');
                jq('#linktoart input').prop('disabled', true).addClass('disabled');
                jq("#facilitytxt input").prop("disabled", true);
                jq("#linktxt input").prop("disabled", true);

                jq("#care_provided input[value=1175]").prop("disabled", false);
                jq("#care_provided input[value=1175]").prop("checked", true);

            }

        }
        var confirmFacility  = function () {
            var tested = getValue("facility.value");
            if(tested==165236){
                jq("#facilitytxt input").val('');
                jq("#facilitytxt input").prop("disabled", false);
            }

            else{
                var default_location = "<lookup expression="kenyaemr.location()" />";
                jq("#facilitytxt input").val(default_location);
                jq("#facilitytxt input").prop("disabled", true);
            }

        }

        var linkToart  = function () {
            var tested = getValue("linktoart.value");
            if(tested==1065){
                jq("#arttxt input").prop("disabled", false);
            }

            else{
                jq("#arttxt input").val('');
                jq("#arttxt input").prop("disabled", true);
            }

        }

        var linkTo_ART  = function () {
            var tested = getValue("linked_to_art.value");
            if(tested=="true"){
                jq("#txtart input").prop("disabled", false).removeClass('disabled');
            }

            else{
                jq("#txtart input").val('');
                jq("#txtart input").prop("disabled", true);
            }

        }


        var providedElseWhere  = function () {
            var careProvided = getValue("care_provided.value");
            if(careProvided==162723){
                jq("#care_provided_txt input").val('');
                jq("#care_provided_txt input").prop("disabled", false);

                jq('#initiatedART input').prop('disabled', false).addClass('disabled');
                jq('#activeART input').prop('disabled', false).addClass('disabled');
                jq('#eligible_for_viral input').prop('disabled', false).addClass('disabled');
                jq('#viral_load input').prop('disabled', false).addClass('disabled');
                jq('#viral_results input').prop('disabled', false).addClass('disabled');
            }
            else if(careProvided==163266){
                var default_location = "<lookup expression="kenyaemr.location()" />";
                jq("#care_provided_txt input").val(default_location);
                jq("#care_provided_txt input").prop("disabled", true);

                jq('#initiatedART input').prop('disabled', false).addClass('disabled');
                jq('#activeART input').prop('disabled', false).addClass('disabled');
                jq('#eligible_for_viral input').prop('disabled', false).addClass('disabled');
                jq('#viral_load input').prop('disabled', false).addClass('disabled');
                jq('#viral_results input').prop('disabled', false).addClass('disabled');
            }
            else if(careProvided==1175){
                jq("#care_provided_txt input").val('');
                jq("#care_provided_txt input").prop("disabled", true);
                jq('#initiatedART input').prop('disabled', true).addClass('disabled');
                jq('#activeART input').prop('disabled', true).addClass('disabled');
                jq('#eligible_for_viral input').prop('disabled', true).addClass('disabled');
                jq('#viral_load input').prop('disabled', true).addClass('disabled');
                jq('#viral_results input').prop('disabled', true).addClass('disabled');
            }

        }


        var onPEPSelected  = function () {
            var pep = getValue("pep_selected.value");
            if(pep==1065){
                jq("#pep_type input").prop("disabled", false);
            }
            else if(pep==1066){
                jq("#pep_type input").prop("disabled", true);
                jq("#type_of_exposure input").prop("disabled", true);

            }else {
                jq("#pep_type input").prop("disabled", true);
            }

        }
        var onOtherExposureTypeSelected  = function () {
            var otherExposure = getValue("exposure_other.value");
            if(otherExposure==5622){
                jq("#pep_type_txt textarea").prop("disabled", false);
            }
            else{
                jq("#pep_type_txt textarea").val('');
                jq("#pep_type_txt textarea").prop("disabled", true);
            }

        }
        var eligible_for_viral_load  = function () {
            var viral = getValue("eligible_for_viral.value");
            if(viral==1065){
                jq("#viral_load input").prop("disabled", false);
                jq("#viral_results input").prop("disabled", false);
            }
            else{
                jq("#viral_load input").prop("disabled", true);
                jq("#viral_results input").prop("disabled", true);
            }

        }


        var test_resultsChanged  = function () {
            $('#pep_prep').find('*').prop('disabled',false);
            var testResult = getValue("test_results.value");
            if(testResult==703 || testResult==138571){
                jq("#linked_to_art input").prop("disabled", false).removeClass('disabled');
                jq('#care_and_treatment').find("select").prop("selectedIndex",0).removeClass('disabled');
                jq('#care_and_treatment').find('*').prop('disabled',false);
                // $("#pep_prep").attr('disabled',"true");
                $('#pepandprep').find('*').prop('disabled',true);
                $('#pepandprep').find('select').prop('disabled',true);
                $('#pepandprep').find('input:text').val('');
                $('#pepandprep').find("select").prop("selectedIndex",0).addClass('disabled');
            }


            else {
                jq("#linked_to_art input").prop("disabled", true).addClass('disabled');
                jq("#txtart input").prop("disabled", true).addClass('disabled');
                jq("#linked_to_art input").prop('checked', false);
                jq("#txtart input").val('');
                $('#care_and_treatment').find('*').prop('disabled',true);
                $('#care_and_treatment').find('input:text').val('');
                $('#care_and_treatment').find("select").prop("selectedIndex",0).addClass('disabled');
                jq("#linkedFacility input").prop("disabled", true).addClass('disabled');

                $('#pepandprep').find('*').prop('disabled',false);
                $('#pepandprep').find('select').prop('disabled',false);
                $('#pepandprep').find("select").prop("selectedIndex",0).removeClass('disabled');
            }

        }

        //On Ready
        $(document).ready(function () {
            // sti forms
            var pgender = "<lookup expression="patient.gender" />";
            if(pgender=="M"){jq("#cervical_cancer").hide();
                jq("#post_abortal").hide();
            }else{jq("#cervical_cancer").show();
                jq("#post_abortal").show();}
            jq('#sti_screened').click(StiScreened);
            jq('#sti_results').click(StiResults);
            jq('#sti_referred').click(StiReferred);
            // tb form
            jq('#tb_screened').click(tbScreened);
            jq('#tb_results').click(tbResults);
            jq('#tb_referred').click(tbReferred);
            // hepatitis c
            jq('#hepc_screened').click(HepatitiscScreened);
            jq('#hepc_results').click(HepatitiscResults);
            jq('#hepc_referred').click(HepatiriscReferred);
            //hep b
            jq('#hepb_screened').click(HepatitisbScreened);
            jq('#hepb_results').click(HepatitisbResults);
            jq('#hepb_referred').click(HepatitisbReferred);
            //Overdose validations
            jq('#overdose_screened').click(OverdoseScreenedSelected);
            jq('#overdose_treated').click(OverdoseTtreateddSelected);
            jq('#overdose_results').click(OverdoseResultsSelected);
            jq('#overdose_referred').click(OverdoseRefferredSelected);

            //Alcohol validations
            jq('#alcohol_screened').click(AlcoholScreenedSelected);
            jq('#alcohol_results').click(AlcoholResultsSelected);
            jq('#alcohol_referred').click(AlcoholReferredSelected);

            //Abscess validations
            jq('#abscess_screened').click(AbscessScreenedSelected);
            jq('#abscess_results').click(AbscessResultsSelected);
            jq('#abscess_referred').click(AbscessReferredSelected);

            //Prep validations
            jq('#prep_screened').click(prepScreened);
            jq('#prep_results').click(prepResults);
            jq('#prep_referred').click(prepReferred);

            //Cervical validations selected
            jq('#cerv_screened').click(CervicalScreeningSelected);
            jq('#cerv_results').click(CervicalResulltsSelected);
            jq('#cerv_referred').click(CervicalReferredSelected);

            //Violence validations
            jq('#vio_screened').click(vilenceScreened);
            jq('#vio_exists').click(vilenceExists);

            jq('#vio_results').click(violenceResults);
            jq('#vio_referred').click(violenceReferred);

            //Risk validations
            jq('#risk_screened').click(riskScreened);
            jq('#risk_results').click(riskResults);
            jq('#risk_referred').click(riskReferred);

            //Family validations
            jq('#fam_screened').click(familyScreened);
            jq('#fam_results').click(familyResults);
            jq('#fam_treated').click(familyTreated);
            jq('#fam_referred').click(familyReferred);

            //Mental validations
            jq('#men_screened').click(menScreened);
            jq('#men_results').click(menResults);
            jq('#men_referred').click(menReferred);
            jq("#hiv_selfreported input").change(hivTesting);
            jq("#hiv_tested input").change(hivTested);
            //jq("#hiv_selftest input").change(numberOfSelfTest);
            jq("#self_tested input").change(SelfTested);
            jq("#selftestResults input").change(selfTestedResults);
            jq("#confirm_test input").change(confirmTest);
            jq("#facility input").change(confirmFacility);
            jq("#linktoart input").change(linkToart);
            jq("#care_provided input").change(providedElseWhere);
            jq("#pep_selected input").change(onPEPSelected);
            jq("#exposure_other input").change(onOtherExposureTypeSelected);
            jq("#test_results input").change(test_resultsChanged);
            jq("#linked_to_art input").change(linkTo_ART);
            jq("#eligible_for_viral input").change(eligible_for_viral_load);


            $("INPUT[type=text],TEXTAREA").attr("disabled", "disabled");
            jq("#vio_results input").prop("disabled", true);
            jq("#Client_visit input:radio").attr('disabled',true);
            jq("#malecondoms input").prop("disabled", false);
            jq("#femalecondoms input").prop("disabled", false);
            jq("#lubes input").prop("disabled", false);
            jq("#needles input").prop("disabled", false);
            jq("#clinical input").prop("disabled", false);
            jq("#lmp_date input").prop("disabled", false);
            jq("#apointment input").prop("disabled", false);
            jq("#edd input").prop("disabled", false);
            jq("#encounter-date input").prop("disabled", false);
            jq("#ConName input").prop("disabled", false);
            jq("#ConDate input").prop("disabled", false);
            jq("#sti_screened input").prop("disabled", false);
            jq("#tb_screened input").prop("disabled", false);
            jq("#hepb_screened input").prop("disabled", false);
            jq("#hepc_screened input").prop("disabled", false);
            jq("#overdose_screened input").prop("disabled", false);
            jq("#abscess_screened input").prop("disabled", false);
            jq("#alcohol_screened input").prop("disabled", false);
            jq("#cerv_screened input").prop("disabled", false);
            jq("#prep_screened input").prop("disabled", false);
            jq("#vio_screened input").prop("disabled", false);
            jq("#risk_screened input").prop("disabled", false);
            jq("#fam_screened input").prop("disabled", false);
            jq("#men_screened input").prop("disabled", false);
            jq("#clinical textarea").prop("disabled", false);
            jq("#tca input").prop("disabled", false);
            jq("#selftxt input").prop("disabled", false);
            jq("#disttxt input").prop("disabled", false);
            jq("#partner input").prop("disabled", false);
            jq("#care_provided input").prop("disabled", false);
            jq("#famMethod select").attr('disabled', 'disabled');


            jq("#self-test-demo input").prop("disabled" ,false);

        });
        //Before Submit
        beforeSubmit.push(function() {
            var validated = /^([1-9]|[1-9][0-9]|[1-9][0-9][0-9])$/;
            var sti_screened = getValue('sti_screened.value');
            var tb_screened = getValue('tb_screened.value');
            var hepb_screened = getValue('hepb_screened.value');
            var hepc_screened = getValue('hepc_screened.value');
            var overdose = getValue('overdose_screened.value');
            var absces = getValue('abscess_screened.value');
            var alcohol = getValue('alcohol_screened.value');
            var cerv = getValue('cerv_screened.value');
            var prep = getValue('prep_screened.value');
            var violence = getValue('vio_screened.value');
            var risk_reduction = getValue('risk_screened.value');
            var family_planning = getValue('fam_screened.value');
            var mental = getValue('men_screened.value');

            var sti_results = getValue('sti_results.value');
            var sti_results2 = getValue('sti_results.value');
            var tb_results= getValue('tb_results.value');
            var hepb_results = getValue('hepb_results.value');
            var hepc_results = getValue('hepc_results.value');
            var overdose_results = getValue('overdose_results.value');
            var absces_results = getValue('abscess_results.value');
            var alcohol_results = getValue('alcohol_results.value');
            var cerv_results = getValue('cerv_results.value');
            var prep_results = getValue('prep_results.value');

            var NumberOfMaleCondomGiven = getField('malecondoms.value').val();
            var NumberOfFemaleCondomsGiven = getField('femalecondoms.value').val();
            var NumberOfSyringesGiven = getField('needles.value').val();
            var NumberOfLubesGiven = getField('lubes.value').val();

           // var violence_results  = getField('violence_results.value').val();
            var risk_reduction_results = getValue('risk_results.value');
            var family_planning_results = getValue('fam_results.value');
            var mental_results = getValue('men_results.value');

            if(sti_screened==1065 &amp;&amp;  sti_results ==false){
                getField('sti_results.error').html('Results required').show();
                return false;
            }
            if(tb_screened==1065 &amp;&amp;  tb_results ==false){
                getField('tb_results.error').html('Results required').show();
                return false;
            }
            if(hepb_screened==1065 &amp;&amp;  hepb_results ==false){
                getField('hepb_results.error').html('Results required').show();
                return false;
            }
            if(hepc_screened==1065 &amp;&amp;  hepc_results ==false){
                getField('hepc_results.error').html('Results required').show();
                return false;
            }
            if(overdose==1065 &amp;&amp;  overdose_results ==false){
                getField('overdose_results.error').html('Results required').show();
                return false;
            }
            if(absces==1065 &amp;&amp;  absces_results ==false){
                getField('abscess_results.error').html('Results required').show();
                return false;
            }
            if(alcohol==1065 &amp;&amp;  alcohol_results ==false){
                getField('alcohol_results.error').html('Results required').show();
                return false;
            }
            if(cerv==1065 &amp;&amp;  cerv_results ==false){
                getField('cerv_results.error').html('Results required').show();
                return false;
            }
            if(prep==1065 &amp;&amp;  prep_results ==false){
                getField('prep_results.error').html('Results required').show();
                return false;
            }

            if(risk_reduction==1065 &amp;&amp;  risk_reduction_results ==false){
                getField('risk_results.error').html('Results required').show();
                return false;
            }
            if(family_planning==1065 &amp;&amp;  family_planning_results ==false){
                getField('fam_results.error').html('Results required').show();
                return false;
            }
            if(mental==1065 &amp;&amp;  mental_results ==false){
                getField('men_results.error').html('Results required').show();
                return false;
            }

            if (NumberOfMaleCondomGiven != "" &amp;&amp; !NumberOfMaleCondomGiven.match(validated)) {
                getField('malecondoms.error').html('Should be between 1 and 200.').show();
                return false;
            }

            if (NumberOfFemaleCondomsGiven != "" &amp;&amp; !NumberOfFemaleCondomsGiven.match(validated)) {
                getField('femalecondoms.error').html('Should be between 1 and 200.').show();
                return false;
            }
            if (NumberOfLubesGiven != "" &amp;&amp; !NumberOfLubesGiven.match(validated)) {
                getField('lubes.error').html('Should be between 1 and 200.').show();
                return false;
            }
            if (NumberOfSyringesGiven!= "" &amp;&amp; !NumberOfSyringesGiven.match(validated)) {
                getField('needles.error').html('Should be between 1 and 200.').show();
                return false;
            }
        });
        clearHiddenSections = function(parentObj) {



            for(var i=0; i &lt; parentObj.length; i++){
                parentObj[i].find('input[type=radio]').each(function() {
                    this.checked = false;
                });
                parentObj[i].find('input[type=checkbox]').each(function() {
                    this.checked = false;
                });
                parentObj[i].find('input[type=text]').each(function() {
                    this.val("");
                });
                parentObj[i].find('select').each(function() {
                    this.selectedIndex =0;
                });
            }
        }
    </script>
    <style>
        .simple-table {
            border: solid 1px #DDEEEE;
            border-collapse: collapse;
            border-spacing: 0;
            font: normal 13px Arial, sans-serif;
        }

        .simple-table thead th {
            background-color: #DDEFEF;
            border: solid 1px #DDEEEE;
            color: #336B6B;
            padding: 10px;
            text-align: left;
            text-shadow: 1px 1px 1px #fff;
        }

        .simple-table td {
            border: solid 1px #DDEEEE;
            color: #333;
            padding: 10px;
            text-shadow: 1px 1px 1px #fff;
        }
        .disabled {
            color: #ebebe4;
    </style>

    <div class="ke-form-header">
        <table width="100%">
            <tr>
                <td>Date:
                    <encounterDate id="encounter-date" showTime="true" />
                </td>
                <td>Location:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation" type="autocomplete"/>
                </td>
            </tr>
        </table>
    </div>
    <!--=============Work flow==================-->
    <ifMode mode="VIEW" include="true">
        <div>
            <table style="width: 100%">
                <tr>
                    <td align="left">
                        Observation Date:
                    </td>
                    <td>
                        Unique Client Number
                    </td>
                    <td align="right">
                        Gender Identity:
                    </td>
                </tr>
                <tr>
                    <td>
                        16-Jan-2019
                    </td>
                    <td>
                        Test
                    </td>
                    <td align="right">
                        Test
                    </td>
                </tr>
            </table>
        </div>

    </ifMode>
    <!-- ============ end work flow =================-->
    <div class="ke-form-content">


        <fieldset>
            <legend>Visit details</legend>
            <table class="simple-table">
                <tr>
                    <td>Type of visit :  </td>
                    <td>
                        <obs id="type_of_visit"
                             conceptId="164181"
                             answerConceptIds="162080,164142"
                             answerLabels="Initial,Revisit"
                             style="radio"  />
                    </td>


                </tr>
                <tr id="visit-reason">
                    <td >Reason for visit : </td>
                    <td>
                        <obs id="pep_type"
                             conceptId="164082"
                             answerConceptIds="5006,1068,165348,160523"
                             answerLabels="Asymptomatic ,Symptomatic ,Quarterly Screening checkup, Follow up"
                             style="radio"
                             answerSeparator="&lt;br /&gt;" />
                    </td>
                </tr>
                <tr>
                    <td >Service delivery Model: </td>
                    <td>
                        <obs id="pep_type"
                             conceptId="160540"
                             answerConceptIds="161235,160545"
                             answerLabels="Static,Outreach"
                             style="radio"
                             answerSeparator="&lt;br /&gt;" />
                    </td>

                </tr>


            </table>
        </fieldset>



        <fieldset id="Client_visit">
            <legend>Clinic Visit Form</legend>
            <table class="simple-table">
                <tr>
                    <td ><p><b>SERVICES</b></p></td>
                    <td ><p><b>SCREENED</b></p></td>
                    <td ><p><b>SCREENING RESULTS</b></p></td>
                    <td ><p><b>TREATED  / SUPPORT</b></p></td>
                    <td ><p><b>REFERRED</b></p></td>
                    <td ><p></p><b>IF YES SPECIFY</b></td>

                </tr>
                <tr>
                    <td ><p>STI</p></td>
                    <td ><p>  <obs id="sti_screened" conceptId="161558" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td width="300"><p>  <obs conceptId="165199"
                                              answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                              style="radio" id="sti_results" required="false" />
                    </p></td>
                    <td ><p>  <obs id="sti_treated" conceptId="165200"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>

                    <td ><p>  <obs id="sti_referred" conceptId="165249"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="sti_txt" class="remarks" conceptId="165250"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>TB</p></td>
                    <td ><p>  <obs id="tb_screened" conceptId="165197" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="tb_results" conceptId="165198" answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="tb_treated" conceptId="1111"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>

                    <td ><p>  <obs id="tb_referred" conceptId="162310"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="tb_txt" class="remarks" conceptId="163323"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>Hepatitis B</p></td>
                    <td ><p>  <obs id="hepb_screened" conceptId="165040" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="hepb_results" conceptId="1322"
                                   answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                   style="radio" rows="2" />
                    </p></td>
                    <td ><p>  <obs id="hepb_treated" conceptId="165251"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>

                    <td ><p>  <obs id="hepb_referred" conceptId="165252"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="hepb_txt" class="remarks" conceptId="165253"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>Hepatitis C</p></td>
                    <td ><p>  <obs id="hepc_screened" conceptId="165041" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="hepc_results" conceptId="161471"
                                   answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="hepc_treated" conceptId="165254"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs conceptId="165255"
                                   style="radio" answerConceptIds="1065,1066" id="hepc_referred" /></p></td>
                    <td ><p>  <obs id="hepctxt" class="remarks" conceptId="165256"
                    /></p></td>

                </tr>

                <tr>
                    <td ><p>Overdose management</p></td>
                    <td ><p>  <obs id="overdose_screened" conceptId="165042" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="overdose_results" conceptId="165046"
                                   answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="overdose_treated" conceptId="165257"
                                   style="radio" answerConceptIds="1065,1066" /></p>

                        <p> Received  naloxone <obs id="naloxane" conceptId="165201"
                                                    answerConceptIds="1065,
                                                            1066"  answerLabels="Yes,No"
                                                    style="radio" />
                        </p>
                    </td>
                    <td ><p>  <obs id="overdose_referred" conceptId="165258"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="overdosetxt" class="remarks" conceptId="165259"
                    /></p></td>

                </tr>


                <tr>
                    <td ><p>Abscess</p></td>
                    <td ><p>  <obs conceptId="165044" required="true"
                                   style="radio" answerConceptIds="1065,1066" id="abscess_screened" /></p></td>
                    <td ><p>  <obs id="abscess_results"  conceptId="165051"
                                   answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="abscess_treated" conceptId="165260"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="abscess_referred" conceptId="165261"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="abscesstxt" class="remarks" conceptId="165262"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>Alcohol and drug abuse</p></td>
                    <td ><p>  <obs id="alcohol_screened" conceptId="165043" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="alcohol_results" conceptId="165047"
                                   answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="alcohol_treated" conceptId="165263"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs conceptId="165264"
                                   style="radio" answerConceptIds="1065,1066" id="alcohol_referred" /></p></td>
                    <td ><p>  <obs id="alcoholtxt" class="remarks" conceptId="165265"
                    /></p></td>

                </tr>

                <tr id="cervical_cancer">
                    <td ><p>Cervical Cancer</p></td>
                    <td ><p>  <obs id="cerv_screened" conceptId="164934"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="cerv_results" conceptId="165196"
                                   answerConceptIds="664,
                                                            703"  answerLabels="Negative,Positive"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="cerv_treated" conceptId="165266"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs conceptId="165267"
                                   id="cerv_referred"  style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="cerv_cancertxt" class="remarks" conceptId="165268"
                    /></p></td>

                </tr>


                <tr>
                    <td ><p>PrEP</p></td>
                    <td ><p>  <obs id="prep_screened" conceptId="165076" required="true"
                                   style="radio" answerConceptIds="1065,1066, 165080" answerLabels="Yes,No, Ongoing"

                    /></p></td>
                    <td ><p>  <obs id="prep_results" conceptId="165202"
                                   answerConceptIds="165087,
                                                            165078"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="prep_treated" conceptId="165203"
                                   answerConceptIds="1065,
                                                            1066"  answerLabels="Initiated,Not Initiated"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="prep_referred" conceptId="165270"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="preptext"  class="remarks" conceptId="165271"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>Violence</p></td>
                    <td ><p>  <obs id="vio_screened" conceptId="165204" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>

                    <td id="violence_results" >
                    <obs id="vio_exists" conceptId="160658"
                                   style="radio" answerConceptIds="1065,1066" />

                        <div id="vio_results" style="float: left; padding-right: 50px">

                            <obs conceptId="165205" answerConceptId="165206" style="checkbox" /><br />
                            <obs conceptId="165205" answerConceptId="121387" answerLabel="  Assault/Physical abuse"  style="checkbox" /><br />
                            <obs conceptId="165205" answerConceptId="165207" style="checkbox" /><br />
                            <obs conceptId="165205" answerConceptId="123007" answerLabel="Verbal Abuse" style="checkbox" /><br />
                            <obs conceptId="165205" answerConceptId="127910" answerLabel="Rape/Sexual assault" style="checkbox" /><br />
                            <obs conceptId="165205" answerConceptId="126312" answerLabel="Discrimination" style="checkbox" /><br />
                        </div>
                    </td>
                    <td ><p>  <obs id="vio_treated" conceptId="165208"
                                   answerConceptIds="1065,
                                                            1066"  answerLabels="Supported,Not Supported"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="vio_referred" conceptId="165273"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="viotext"  class="remarks" conceptId="165274"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>Risk Reduction Counselling</p></td>
                    <td ><p>  <obs id="risk_screened" conceptId="165045" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="risk_results" conceptId="165050"
                                   answerConceptIds="165087,
                                                            165078"  answerLabels="Eligible,Not Eligible"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="risk_treated" conceptId="165053"
                                   answerConceptIds="1065,
                                                            1066"  answerLabels="Supported,Not Supported"
                                   style="radio" />
                    </p></td>

                    <td ><p>Counseling EBI provided?  <obs id="risk_referred" conceptId="161595"
                                                           answerConceptIds="1065,
                                                            1066"  answerLabels="Yes,No"
                                                           style="radio" />
                    </p></td>
                    <td ><p>  <obs id="risktxt" class="remarks" conceptId="165277"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>Family Planning</p></td>
                    <td ><p>  <obs id="fam_screened" conceptId="1382" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="fam_results" conceptId="165209"
                                   answerConceptIds="165087,
                                                            165078"  answerLabels="Eligible,Not Eligible"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="fam_treated" conceptId="160653"
                                   answerConceptIds="1065,
                                                            1066"  answerLabels="yes,No"
                                   style="radio" />
                    </p>
                        <p> Given Method <obs id="famMethod" conceptId="160576"
                        /></p>
                    </td>
                    <td ><p>  <obs id="fam_referred" conceptId="165279"
                                   style="radio" answerConceptIds="1065,1066"/></p></td>
                    <td ><p>  <obs id="famtxt" class="remarks" conceptId="165280"
                    /></p></td>

                </tr>
                <tr>
                    <td ><p>Mental health</p></td>
                    <td ><p>  <obs id="men_screened" conceptId="165210" required="true"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>

                    <td ><p>  <obs id="men_results" conceptId="165211"
                                   style="radio" answerConceptIds="165212,157790,134017,134011,126627"
                                   answerSeparator="&lt;br /&gt;"/></p></td>


                    <td ><p>  <obs id="men_treated" conceptId="165213"
                                   answerConceptIds="1065,
                                                            1066"  answerLabels="Supported,Not Supported"
                                   style="radio" />
                    </p></td>
                    <td ><p>  <obs id="men_referred" conceptId="165281"
                                   style="radio" answerConceptIds="1065,1066" /></p></td>
                    <td ><p>  <obs id="mentxt" class="remarks" conceptId="165282"
                    /></p></td>

                </tr>


            </table>

        </fieldset>

        <!--        ============HIV TESTING SERVICES===========================-->

        <fieldset>
            <legend>HIV Testing services</legend>
            <table class="simple-table">
                <tr>
                    <td ><p><b>Self reported status</b></p></td>
                    <td ><p><b>Setting of the last HIV test</b></p></td>
                    <td ><p><b>Counselled</b></p></td>
                    <td ><p><b>Tested</b></p></td>
                    <td ><p><b>Frequency of test</b></p></td>
                    <td ><p><b>Received results</b></p></td>
                    <td ><p><b>Testing results</b></p></td>
                    <td ><p><b>Linked to ART</b></p></td>
                    <td ><p><b>Facility</b></p></td>

                </tr>
                <tr>
                    <td width="156" valign="top"><p>  <obs id="hiv_selfreported" class="consent" conceptId="165214"
                                                           style="radio" answerConceptIds="703,664, 1067" answerLabels="Positive,Negative, Unknown"  answerSeparator="&lt;br /&gt;" /></p></td>

                    <td width="156" valign="top"><p>  <obs id="hiv_settingoflasttest" class="consent" conceptId="165215"
                                                           style="radio" answerConceptIds="165216,165217,1402" answerLabels="Universal HTS,Self-testing ,Never tested"  answerSeparator="&lt;br /&gt;" /></p></td>

                    <td ><p>  <obs id="hiv_counselled" conceptId="159382"
                                   style="radio" answerConceptIds="1065,1066" answerSeparator="&lt;br /&gt;" /></p></td>

                    <td ><p>  <obs id="hiv_tested" conceptId="164401"
                                   style="radio" answerConceptIds="1065,1066,1175" answerSeparator="&lt;br /&gt;" /></p></td>

                    <td ><p>  <obs id="test_frequency" conceptId="165218"
                                   style="radio" answerSeparator="&lt;br /&gt;" /></p></td>

                    <td ><p>  <obs id="received_results" conceptId="164848"
                                   answerConceptIds="1065,
                                                            1066,1067"  answerLabels="Yes,No, Not applicable"
                                   style="radio" answerSeparator="&lt;br /&gt;"  />
                    </p></td>
                    <td ><p>  <obs id="test_results" conceptId="159427"
                                   style="radio"  answerConceptIds="664,703,165232,138571,1118" answerLabels="Negative, Positive, Inconclusive,Known positive, Not Applicable" answerSeparator="&lt;br /&gt;" /></p></td>

                    <td ><p>  <obs id="linked_to_art" conceptId="1648"
                                   style="yes_no"  /></p></td>

                    <td ><p>  <obs id="txtart" class="remarks" conceptId="163042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                    /></p></td>

                </tr>


            </table>

        </fieldset>

        <!--        ======================HIV SELF TESTING=========================-->


        <fieldset>
            <legend>Self testing</legend>
            <table class="simple-table">
                <tr>
                    <td><p><b>HIV self-test education/<br/> demonstration </b></p></td>
                    <td><p><b>No. of HIV self-test kits given</b></p></td>
                    <td><p><b>Self-tested for HIV</b></p></td>
                    <td><p><b>Date conducted</b></p></td>
                    <td><p><b>Frequency of test</b></p></td>
                    <td><p><b>Testing results</b></p></td>
                    <td><p><b>Confirmatory HIV <br/>test results</b></p></td>
                    <td><p><b>Facility name where <br/>confirmatory was done</b></p></td>

                    <td><p><b>Linked to ART</b></p></td>


                </tr>
                <tr>
                    <td  width="160"><p>  <obs id="self-test-demo" conceptId="165220"
                                               style="radio" answerConceptIds="1065,1066" /></p></td>

                    <td>
                        <p>For Self test  <obs id="selftxt" class="remarks" conceptId="165222"/></p>
                        <p>For Distributing <obs id="disttxt" class="remarks" conceptId="165223" /></p></td>

                    <td><p>  <obs conceptId="164952" style="radio" answerConceptIds="1065,1066" id="self_tested" answerSeparator="&lt;br /&gt;" /></p></td>
                    <td><p>  <obs id="selftestDate" conceptId="164400"
                    /></p></td>

                    <td><p>  <obs id="selftestFrequency" conceptId="165231" style="radio" answerSeparator="&lt;br /&gt;"  /></p></td>

                    <td width="160"><p>  <obs id="selftestResults" conceptId="165233" style="radio" answerConceptIds="664,703,165232" answerLabels="Negative,Positive, Inconclusive" answerSeparator="&lt;br /&gt;"/></p></td>

                    <td><p>  <obs id="confirm_test" conceptId="165234" style="radio" answerConceptIds="664,703,1118" answerLabels="Negative, Positive, Not done" answerSeparator="&lt;br /&gt;" /></p></td>

                    <td><p>  <obs id="facility" conceptId="165237" style="radio" answerSeparator="&lt;br /&gt;" /></p>
                        <p> if off-site specify <obs id="facilitytxt" class="remarks" conceptId="162724" /></p></td>

                    <td><p>  <obs id="linktoart" conceptId="165238" style="radio"  /></p>
                        <p>if yes facility linked to <obs id="arttxt" class="remarks" conceptId="161562" /></p></td>
                </tr>

            </table>

        </fieldset>


        <!--        ==============================================councelor name===========-->
        <div>

            <fieldset>
                <legend>Counsellor name and Date</legend>
                <table class="simple-table">
                    <tr>
                        <td ><p><b>Counsellor name</b></p></td>

                        <td ><p><b>Date</b></p></td>
                    </tr>
                    <tr>

                        <td ><p>  <obs id="ConName" conceptId="160632" class="remarks" answerConceptIds="162591"   answerSeparator="&lt;br /&gt;"/>
                        </p></td>

                        <td ><p>  <obs id="ConDate" conceptId="163526" class="remarks" answerConceptIds="162591"   answerSeparator="&lt;br /&gt;"/>
                        </p></td>
                    </tr>

                </table>

            </fieldset>
        </div>
        <!--        ===========================CARE AND TREATMENT=====================-->
        <div id="care_and_treatment">

            <fieldset>
                <legend>Care and treatment</legend>
                <table class="simple-table">
                    <tr>
                        <td ><p><b>Facility of HIV Care</b></p></td>
                        <td ><p><b>Initiated on ART this month</b></p></td>
                        <td ><p><b>Active on ART</b></p></td>
                        <td ><p><b>Eligible for Viral Load</b></p></td>
                        <td ><p><b>Viral Load Test Done</b></p></td>
                        <td ><p><b>Viral Load Results</b></p></td>

                    </tr>
                    <tr>

                        <td ><p>  <obs id="care_provided" conceptId="165239" style="radio" answerConceptIds="163266,162723,1175" answerLabels="Provided here, Provided elsewhere, N/A" answerSeparator="&lt;br /&gt;"/></p>
                            <p>Provided elsewhere Specify:<br/> <obs id="care_provided_txt" class="remarks" conceptId="163042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/></p>
                        </td>
                        <td ><p>  <obs id="initiatedART" conceptId="165240" answerConceptIds="1065,1066,1175" answerLabels="Yes, No, Not applicable" style="radio" answerSeparator="&lt;br /&gt;" /> </p></td>
                        <td ><p>  <obs id="activeART" conceptId="160119" answerConceptIds="1065,1066,1175" answerLabels="Yes, No, Not applicable" style="radio" answerSeparator="&lt;br /&gt;" /> </p></td>
                        <td ><p>  <obs id="eligible_for_viral" conceptId="165242" answerConceptIds="1065,1066,1175" answerLabels="Yes, No, Not applicable" style="radio" answerSeparator="&lt;br /&gt;"/> </p></td>
                        <td ><p>  <obs id="viral_load" conceptId="165243" answerConceptIds="1065,1066,1175" answerLabels="Yes, No, Not applicable" style="radio" answerSeparator="&lt;br /&gt;" /> </p></td>
                        <td ><p>  <obs id="viral_results" conceptId="165246" answerConceptIds="165244,165245,164369,1175" answerLabels="Suppressed,Not Suppressed,Results not yet received,Not applicable" style="radio" answerSeparator="&lt;br /&gt;"/>
                        </p></td>
                    </tr>

                </table>

            </fieldset>
        </div>

        <!--        ===============================OTHER SERVICES========================-->

        <fieldset>
            <legend>Other services</legend>
            <table class="simple-table">
                <tr>
                    <td>
                        Service provided :
                    </td>
                    <td>
                        <table class="simple-table" style=" float: left; ">
                            <tr>
                                <td>
                                    Condom education/demonstration
                                </td>
                                <td>
                                    <obs conceptId="165247" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" />
                                </td>
                            </tr>
                            <tr id="post_abortal">
                                <td>
                                    Post Abortal Care provided
                                </td>
                                <td>
                                    <obs conceptId="164820" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" />
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Referral
                                </td>
                                <td>
                                    <obs conceptId="165302" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio" />
                                </td>
                            </tr>
                        </table>
                    </td>
                    <td>
                        Commodities given :
                    </td>
                    <td>
                        <table class="simple-table" style=" float: right; ">
                            <tr>
                                <td>
                                    No. of condoms
                                </td>
                                <td>
                                    Male      &#160;&#160;&#160;&#160;&#160;&#160; <obs id="malecondoms" conceptId="165055"/>
                                    Female     &#160;&#160; <obs id="femalecondoms" conceptId="165056"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    No. of lubes given
                                </td>
                                <td>
                                    <obs id="lubes" conceptId="165057"/>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    Number of needles and syringes given:
                                </td>
                                <td>
                                    <obs id="needles" conceptId="165058"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr id="pepandprep">
                    <td > PEP :  &#160;&#160;  <obs id="pep_selected" conceptId="164845" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio"  /></td>
                    <td id="type_of_exposure">Type of exposure :<br/>
                        <obs conceptId="165060" answerConceptId="127910" style="checkbox" /><br />
                        <obs conceptId="165060" answerConceptId="165059" style="checkbox" /><br />
                        <obs id="exposure_other" conceptId="165060" answerConceptId="5622" style="checkbox" /><br />
                    </td>

                    <td width="156" id="pep_others" valign="top"><p>If OtherSpecify</p></td>
                    <td ><p>  <obs id="pep_type_txt" conceptId="163042AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"  cols="20"/></p></td>
                </tr>

                <tr>
                    <td  colspan="2"> Link to psychosocial support :  &#160;&#160;  <obs id="linked_to_support" conceptId="163766" answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" answerLabels="Yes,No" style="radio"  /></td>


                </tr>
                <tr>
                    <td ><p>Clinical Notes</p></td>
                    <td ><p>  <obs id="clinical"  conceptId="165248" cols="20"   /></p></td>
                </tr>
                <tr>
                    <td ><p>Next Visit Date</p></td>
                    <td><obs id="tca" conceptId="5096AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" allowFutureDates="true" /></td>
                </tr>
            </table>
        </fieldset>

        <!--        =============================Clinician sign off===========-->
        <div>

            <fieldset>
                <legend>Clinician sign off and Date</legend>
                <table class="simple-table">
                    <tr>
                        <td ><p><b>clinician name</b></p></td>

                        <td ><p><b> Sign off date</b></p></td>
                    </tr>
                    <tr>

                        <td ><p>  <obs id="ConName" conceptId="160632" class="remarks" answerConceptIds="162591"   answerSeparator="&lt;br /&gt;"/>
                        </p></td>

                        <td ><p>  <obs id="ConDate" conceptId="163526" class="remarks" answerConceptIds="162591"   answerSeparator="&lt;br /&gt;"/>
                        </p></td>
                    </tr>

                </table>

            </fieldset>
        </div>
    </div>
    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>